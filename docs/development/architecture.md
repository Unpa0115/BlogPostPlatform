# ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

BlogPostPlatformã®ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã¨æŠ€è¡“ä»•æ§˜ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   Backend       â”‚    â”‚   External      â”‚
â”‚   (Next.js)     â”‚â—„â”€â”€â–ºâ”‚   (API Routes)  â”‚â—„â”€â”€â–ºâ”‚   Services      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UI Components â”‚    â”‚   Database      â”‚    â”‚   OpenAI        â”‚
â”‚   (React)       â”‚    â”‚   (PostgreSQL)  â”‚    â”‚   Whisper API   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   State Mgmt    â”‚    â”‚   Encryption    â”‚    â”‚   YouTube       â”‚
â”‚   (Context)     â”‚    â”‚   (AES-256)     â”‚    â”‚   Data API      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   File Upload   â”‚    â”‚   Credential    â”‚    â”‚   Browserless   â”‚
â”‚   (Multer)      â”‚    â”‚   Storage       â”‚    â”‚   (Voicy)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```typescript
// ä¸»è¦æŠ€è¡“
const frontendStack = {
  framework: "Next.js 14.2.25",
  language: "TypeScript 5.2.2",
  ui: "React 18.2.0",
  styling: "Tailwind CSS 3.4.1",
  components: "Shadcn/ui + Radix UI",
  icons: "Lucide React 0.446.0",
  state: "React Context + Custom Hooks",
};
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

```typescript
// ä¸»è¦æŠ€è¡“
const backendStack = {
  runtime: "Node.js 18+",
  framework: "Next.js API Routes",
  database: "Prisma 5.11.0 + PostgreSQL",
  authentication: "Clerk 6.12.9",
  encryption: "crypto-js + bcryptjs",
  fileProcessing: "Multer + Sharp",
};
```

### å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹

```typescript
// å¤–éƒ¨API
const externalServices = {
  openai: "Whisper API + GPT-4o-mini",
  youtube: "YouTube Data API v3",
  browserless: "Browserless.io",
  railway: "Railway PostgreSQL",
  spotify: "RSS Feed Generation",
};
```

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ api/               # API Routes
â”‚   â”‚   â”œâ”€â”€ auth/          # èªè¨¼é–¢é€£
â”‚   â”‚   â”œâ”€â”€ platforms/     # ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é€£æº
â”‚   â”‚   â”œâ”€â”€ uploads/       # ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
â”‚   â”‚   â””â”€â”€ rss/           # RSS Feedç”Ÿæˆ
â”‚   â”œâ”€â”€ globals.css        # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”œâ”€â”€ layout.tsx         # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â””â”€â”€ page.tsx           # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
â”œâ”€â”€ components/            # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ui/               # å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ upload-form.tsx   # ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒ 
â”‚   â””â”€â”€ distribution-manager.tsx # é…ä¿¡ç®¡ç†
â”œâ”€â”€ lib/                  # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
â”‚   â”œâ”€â”€ database.ts       # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
â”‚   â”œâ”€â”€ encryption.ts     # æš—å·åŒ–æ©Ÿèƒ½
â”‚   â”œâ”€â”€ voicyAutomation.ts # Voicyè‡ªå‹•åŒ–
â”‚   â””â”€â”€ youtube.ts        # YouTube API
â”œâ”€â”€ hooks/                # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ use-platforms.ts # ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†
â”‚   â””â”€â”€ use-toast.ts     # é€šçŸ¥ç®¡ç†
â”œâ”€â”€ contexts/             # React Context
â”‚   â””â”€â”€ auth-context.tsx # èªè¨¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
â””â”€â”€ types/               # TypeScriptå‹å®šç¾©
    â””â”€â”€ index.ts         # å…±é€šå‹å®šç¾©
```

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### èªè¨¼æƒ…å ±ã®æš—å·åŒ–

```typescript
// src/lib/encryption.ts
export class CredentialEncryption {
  private algorithm = 'aes-256-gcm';
  private key: Buffer;
  
  constructor() {
    const encryptionKey = process.env.ENCRYPTION_KEY;
    if (!encryptionKey || encryptionKey.length !== 32) {
      throw new Error('Invalid encryption key');
    }
    this.key = Buffer.from(encryptionKey, 'hex');
  }
  
  encrypt(data: any): string {
    const iv = crypto.randomBytes(16);
    const cipher = crypto.createCipher(this.algorithm, this.key);
    cipher.setAAD(Buffer.from('credentials'));
    
    let encrypted = cipher.update(JSON.stringify(data), 'utf8', 'hex');
    encrypted += cipher.final('hex');
    
    const authTag = cipher.getAuthTag();
    
    return JSON.stringify({
      iv: iv.toString('hex'),
      encrypted,
      authTag: authTag.toString('hex'),
    });
  }
  
  decrypt(encryptedData: string): any {
    const { iv, encrypted, authTag } = JSON.parse(encryptedData);
    
    const decipher = crypto.createDecipher(this.algorithm, this.key);
    decipher.setAAD(Buffer.from('credentials'));
    decipher.setAuthTag(Buffer.from(authTag, 'hex'));
    
    let decrypted = decipher.update(encrypted, 'hex', 'utf8');
    decrypted += decipher.final('utf8');
    
    return JSON.parse(decrypted);
  }
}
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ èªè¨¼æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE platform_credentials (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  platform VARCHAR(50) NOT NULL,
  encrypted_data TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UNIQUE(user_id, platform)
);

-- éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE audio_files (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  filename VARCHAR(255) NOT NULL,
  original_name VARCHAR(255) NOT NULL,
  file_size BIGINT NOT NULL,
  mime_type VARCHAR(100) NOT NULL,
  duration FLOAT,
  uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- é…ä¿¡ã‚¸ãƒ§ãƒ–ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE distribution_jobs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  audio_file_id UUID REFERENCES audio_files(id) ON DELETE CASCADE,
  platform VARCHAR(50) NOT NULL,
  status VARCHAR(20) DEFAULT 'pending',
  metadata JSONB,
  error_message TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 1. éŸ³å£°ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ãƒ­ãƒ¼

```typescript
// éŸ³å£°ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼
const uploadFlow = async (audioFile: File) => {
  // 1. ãƒ•ã‚¡ã‚¤ãƒ«æ¤œè¨¼
  const validation = await validateAudioFile(audioFile);
  if (!validation.isValid) {
    throw new Error(validation.error);
  }
  
  // 2. ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
  const savedFile = await saveAudioFile(audioFile);
  
  // 3. éŸ³å£°å‡¦ç†
  const processedAudio = await processAudio(savedFile);
  
  // 4. æ–‡å­—èµ·ã“ã—
  const transcript = await transcribeAudio(processedAudio);
  
  // 5. ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¿å­˜
  const metadata = await saveMetadata({
    fileId: savedFile.id,
    transcript,
    duration: processedAudio.duration,
  });
  
  return { savedFile, processedAudio, transcript, metadata };
};
```

### 2. é…ä¿¡ãƒ•ãƒ­ãƒ¼

```typescript
// å¤šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é…ä¿¡ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼
const distributionFlow = async (audioFile: File, platforms: string[]) => {
  // 1. ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ èªè¨¼æƒ…å ±ã®å–å¾—
  const credentials = await getPlatformCredentials(platforms);
  
  // 2. ä¸¦åˆ—é…ä¿¡å‡¦ç†
  const distributionPromises = platforms.map(async (platform) => {
    try {
      switch (platform) {
        case 'youtube':
          return await uploadToYouTube(audioFile, credentials.youtube);
        case 'voicy':
          return await uploadToVoicy(audioFile, credentials.voicy);
        case 'spotify':
          return await updateRSSFeed(audioFile);
        default:
          throw new Error(`Unsupported platform: ${platform}`);
      }
    } catch (error) {
      console.error(`${platform} upload failed:`, error);
      return { platform, success: false, error: error.message };
    }
  });
  
  // 3. çµæœã®åé›†
  const results = await Promise.allSettled(distributionPromises);
  
  // 4. ã‚¸ãƒ§ãƒ–ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°
  await updateJobStatus(results);
  
  return results;
};
```

## ğŸ¯ APIè¨­è¨ˆ

### RESTful APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```typescript
// èªè¨¼é–¢é€£
POST   /api/auth/login          # ãƒ­ã‚°ã‚¤ãƒ³
POST   /api/auth/register       # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
GET    /api/auth/me             # ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—

// ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
POST   /api/uploads             # éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
GET    /api/uploads/list        # ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—
POST   /api/uploads/trim        # éŸ³å£°ãƒˆãƒªãƒŸãƒ³ã‚°
POST   /api/uploads/transcribe  # æ–‡å­—èµ·ã“ã—

// ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†
GET    /api/platforms           # ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä¸€è¦§
POST   /api/platforms/credentials # èªè¨¼æƒ…å ±ä¿å­˜
GET    /api/platforms/voicy-upload # Voicyé…ä¿¡
POST   /api/platforms/youtube/upload # YouTubeé…ä¿¡

// RSS Feed
GET    /api/rss                 # RSS Feedå–å¾—
POST   /api/rss/episodes        # ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰è¿½åŠ 
GET    /api/rss/stats           # RSSçµ±è¨ˆæƒ…å ±

// ã‚¸ãƒ§ãƒ–ç®¡ç†
GET    /api/jobs                # ã‚¸ãƒ§ãƒ–ä¸€è¦§å–å¾—
POST   /api/jobs                # ã‚¸ãƒ§ãƒ–ä½œæˆ
PUT    /api/jobs/:id            # ã‚¸ãƒ§ãƒ–æ›´æ–°
```

### GraphQLã‚¹ã‚­ãƒ¼ãƒï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰

```graphql
type User {
  id: ID!
  email: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  audioFiles: [AudioFile!]!
  distributionJobs: [DistributionJob!]!
}

type AudioFile {
  id: ID!
  filename: String!
  originalName: String!
  fileSize: Int!
  duration: Float
  uploadedAt: DateTime!
  user: User!
  transcriptions: [Transcription!]!
}

type DistributionJob {
  id: ID!
  platform: String!
  status: JobStatus!
  metadata: JSON
  errorMessage: String
  createdAt: DateTime!
  updatedAt: DateTime!
  user: User!
  audioFile: AudioFile!
}

type Transcription {
  id: ID!
  transcript: String!
  language: String!
  createdAt: DateTime!
  audioFile: AudioFile!
}

enum JobStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
}

type Query {
  user: User
  audioFiles: [AudioFile!]!
  distributionJobs: [DistributionJob!]!
  rssFeed: String!
}

type Mutation {
  uploadAudioFile(file: Upload!): AudioFile!
  transcribeAudio(fileId: ID!): Transcription!
  distributeToPlatform(fileId: ID!, platform: String!): DistributionJob!
  updateJobStatus(jobId: ID!, status: JobStatus!): DistributionJob!
}
```

## ğŸ”§ è¨­å®šç®¡ç†

### ç’°å¢ƒå¤‰æ•°ç®¡ç†

```typescript
// src/lib/config.ts
export const config = {
  // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
  database: {
    url: process.env.DATABASE_URL!,
    ssl: process.env.NODE_ENV === 'production',
  },
  
  // OpenAIè¨­å®š
  openai: {
    apiKey: process.env.OPENAI_API_KEY!,
    model: 'whisper-1',
    maxTokens: 2000,
  },
  
  // YouTubeè¨­å®š
  youtube: {
    clientId: process.env.YOUTUBE_CLIENT_ID!,
    clientSecret: process.env.YOUTUBE_CLIENT_SECRET!,
    redirectUri: `${process.env.NEXT_PUBLIC_APP_URL}/api/platforms/youtube/callback`,
  },
  
  // Browserlessè¨­å®š
  browserless: {
    apiKey: process.env.BROWSERLESS_API_KEY!,
    wsEndpoint: `wss://chrome.browserless.io?token=${process.env.BROWSERLESS_API_KEY}`,
  },
  
  // ãƒ•ã‚¡ã‚¤ãƒ«è¨­å®š
  file: {
    maxSize: 50 * 1024 * 1024, // 50MB
    allowedTypes: ['audio/mpeg', 'audio/wav', 'audio/mp4'],
    uploadDir: './uploads',
  },
  
  // æš—å·åŒ–è¨­å®š
  encryption: {
    algorithm: 'aes-256-gcm',
    key: process.env.ENCRYPTION_KEY!,
  },
};
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

```typescript
// ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š
const cacheConfig = {
  // Redisè¨­å®šï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰
  redis: {
    url: process.env.REDIS_URL,
    ttl: 3600, // 1æ™‚é–“
  },
  
  // ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥
  memory: {
    maxSize: 100,
    ttl: 300, // 5åˆ†
  },
  
  // CDNè¨­å®š
  cdn: {
    domain: process.env.CDN_DOMAIN,
    cacheControl: 'public, max-age=3600',
  },
};
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–

```sql
-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®š
CREATE INDEX idx_audio_files_user_id ON audio_files(user_id);
CREATE INDEX idx_distribution_jobs_user_id ON distribution_jobs(user_id);
CREATE INDEX idx_distribution_jobs_status ON distribution_jobs(status);
CREATE INDEX idx_platform_credentials_user_platform ON platform_credentials(user_id, platform);

-- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰
CREATE TABLE audio_files_partitioned (
  LIKE audio_files INCLUDING ALL
) PARTITION BY RANGE (uploaded_at);

CREATE TABLE audio_files_2024 PARTITION OF audio_files_partitioned
FOR VALUES FROM ('2024-01-01') TO ('2025-01-01');
```

## ğŸ” ç›£è¦–ã¨ãƒ­ã‚°

### ãƒ­ã‚°è¨­å®š

```typescript
// src/lib/logger.ts
export class Logger {
  private static instance: Logger;
  
  static getInstance(): Logger {
    if (!Logger.instance) {
      Logger.instance = new Logger();
    }
    return Logger.instance;
  }
  
  info(message: string, metadata?: any) {
    console.log(`[INFO] ${new Date().toISOString()}: ${message}`, metadata);
  }
  
  error(message: string, error?: Error) {
    console.error(`[ERROR] ${new Date().toISOString()}: ${message}`, error);
  }
  
  warn(message: string, metadata?: any) {
    console.warn(`[WARN] ${new Date().toISOString()}: ${message}`, metadata);
  }
}
```

### ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†

```typescript
// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹
const metrics = {
  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚é–“
  uploadTime: new Histogram({
    name: 'file_upload_duration_seconds',
    help: 'Duration of file uploads',
    buckets: [0.1, 0.5, 1, 2, 5, 10],
  }),
  
  // é…ä¿¡æˆåŠŸç‡
  distributionSuccess: new Counter({
    name: 'distribution_success_total',
    help: 'Total successful distributions',
    labelNames: ['platform'],
  }),
  
  // APIå¿œç­”æ™‚é–“
  apiResponseTime: new Histogram({
    name: 'api_response_time_seconds',
    help: 'API response time',
    labelNames: ['endpoint'],
  }),
};
```

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### Railwayè¨­å®š

```json
// railway.json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "npm start",
    "healthcheckPath": "/api/health",
    "healthcheckTimeout": 300,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

### Dockerè¨­å®šï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰

```dockerfile
# Dockerfile
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

RUN npm run build

EXPOSE 3000

CMD ["npm", "start"]
```

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã¤ã„ã¦è³ªå•ãŒã‚ã‚‹å ´åˆã¯ã€[GitHub Issues](https://github.com/yujiyamanaka/BlogPostPlatform/issues)ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚ 